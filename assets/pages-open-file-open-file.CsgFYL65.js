import{_ as e,k as t,l as a,r as s,q as l,c as i,w as n,i as c,o,a as r,d as u,t as f,z as d,A as p,F as _,N as y,O as m,g as k}from"./index-QkH9l-qM.js";import{u as S,_ as x}from"./script.BSxtZnhO.js";import{r as w}from"./uni-app.es.Da86EhfK.js";const F=e({__name:"open-file",setup(e){const F=S(),g=t([]);a((async()=>{v()}));const v=async()=>{g.value=await F.getScripts()},C=async()=>{try{const[e]=await y({count:1,extension:[".txt"]});if(e){const t=await uni.getFileSystemManager().readFileSync(e.path,"utf8");F.setText(t),F.setTitle(e.name),m()}}catch(e){console.error("File selection error:",e)}};return(e,t)=>{const a=w(s("u-button"),x),y=c,S=k,h=l("uni-icons");return o(),i(y,{class:"open-file-screen"},{default:n((()=>[r(y,{class:"button-container"},{default:n((()=>[r(a,{onClick:C},{default:n((()=>[u(f(e.$t("OpenFileScreen.ElevatedButton_Select")),1)])),_:1})])),_:1}),g.value.length>0?(o(),i(y,{key:0,class:"file-list"},{default:n((()=>[(o(!0),d(_,null,p(g.value,(e=>(o(),i(y,{key:e.id,class:"file-item"},{default:n((()=>[r(y,{class:"file-info",onClick:t=>(async e=>{const t=await F.loadScript(e);F.setText(t),m()})(e.id)},{default:n((()=>[r(S,{class:"file-title"},{default:n((()=>[u(f(e.title),1)])),_:2},1024),r(S,{class:"file-date"},{default:n((()=>[u(f(e.createdAt),1)])),_:2},1024)])),_:2},1032,["onClick"]),r(y,{class:"file-actions"},{default:n((()=>[r(h,{type:"trash",size:"24",onClick:t=>(async e=>{await F.deleteScript(e),v()})(e.id)},null,8,["onClick"])])),_:2},1024)])),_:2},1024)))),128))])),_:1})):(o(),i(y,{key:1,class:"empty-state"},{default:n((()=>[r(S,{class:"empty-text"},{default:n((()=>[u(f(e.$t("OpenFileScreen.if_empty")),1)])),_:1})])),_:1}))])),_:1})}}},[["__scopeId","data-v-6dfe2376"]]);export{F as default};
