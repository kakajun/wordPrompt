import{_ as e,k as t,l as a,r as s,c as l,w as i,i as n,o as c,a as o,d as r,t as u,y as f,z as d,F as p,N as _,O as y,g as m}from"./index-BfXH-iFH.js";import{u as k,_ as S}from"./script.B_0Q1OoH.js";import{r as x}from"./uni-app.es.BLvRAqrq.js";import{_ as w}from"./uni-icons.BUVIs_UK.js";const F=e({__name:"open-file",setup(e){const F=k(),g=t([]);a((async()=>{v()}));const v=async()=>{g.value=await F.getScripts()},C=async()=>{try{const[e]=await _({count:1,extension:[".txt"]});if(e){const t=await uni.getFileSystemManager().readFileSync(e.path,"utf8");F.setText(t),F.setTitle(e.name),y()}}catch(e){console.error("File selection error:",e)}};return(e,t)=>{const a=x(s("u-button"),S),_=n,k=m,h=x(s("uni-icons"),w);return c(),l(_,{class:"open-file-screen"},{default:i((()=>[o(_,{class:"button-container"},{default:i((()=>[o(a,{onClick:C},{default:i((()=>[r(u(e.$t("OpenFileScreen.ElevatedButton_Select")),1)])),_:1})])),_:1}),g.value.length>0?(c(),l(_,{key:0,class:"file-list"},{default:i((()=>[(c(!0),f(p,null,d(g.value,(e=>(c(),l(_,{key:e.id,class:"file-item"},{default:i((()=>[o(_,{class:"file-info",onClick:t=>(async e=>{const t=await F.loadScript(e);F.setText(t),y()})(e.id)},{default:i((()=>[o(k,{class:"file-title"},{default:i((()=>[r(u(e.title),1)])),_:2},1024),o(k,{class:"file-date"},{default:i((()=>[r(u(e.createdAt),1)])),_:2},1024)])),_:2},1032,["onClick"]),o(_,{class:"file-actions"},{default:i((()=>[o(h,{type:"trash",size:"24",onClick:t=>(async e=>{await F.deleteScript(e),v()})(e.id)},null,8,["onClick"])])),_:2},1024)])),_:2},1024)))),128))])),_:1})):(c(),l(_,{key:1,class:"empty-state"},{default:i((()=>[o(k,{class:"empty-text"},{default:i((()=>[r(u(e.$t("OpenFileScreen.if_empty")),1)])),_:1})])),_:1}))])),_:1})}}},[["__scopeId","data-v-6dfe2376"]]);export{F as default};
